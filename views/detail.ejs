<!DOCTYPE html>
<html lang="id">
<head>
    <%- include('layout/head') %>
</head>
<body class="pb-24 animate-fade">
    <nav class="fixed top-0 w-full z-50 p-4 flex justify-between items-center bg-gradient-to-b from-black/90 to-transparent transition-all duration-300">
        <a href="/" class="bg-black/40 hover:bg-black/60 p-2.5 rounded-full backdrop-blur text-white border border-white/10 transition">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
        </a>
    </nav>

    <div class="relative w-full h-[55vh]">
        <div class="absolute inset-0 bg-purple-900/20"></div>
        <img src="<%= anime.img %>" class="w-full h-full object-cover opacity-60 mask-image-b">
        <div class="absolute inset-0 bg-gradient-to-t from-[#0b0c15] via-[#0b0c15]/50 to-transparent"></div>
        
        <div class="absolute bottom-0 left-0 w-full p-5 md:p-10 animate-slide-up">
            <div class="container mx-auto flex gap-6 items-end">
                <img src="<%= anime.img %>" class="hidden md:block w-40 rounded-xl shadow-2xl shadow-purple-500/20 border-2 border-white/10">
                
                <div class="flex-1">
                    <div class="flex flex-wrap gap-2 mb-3">
                        <span class="px-2.5 py-0.5 rounded text-[10px] font-bold uppercase tracking-wide bg-white text-black"><%= anime.status %></span>
                        <span class="px-2.5 py-0.5 rounded text-[10px] font-bold bg-yellow-500/20 text-yellow-300 border border-yellow-500/30">â˜… <%= anime.rating %></span>
                    </div>
                    <h1 class="text-3xl md:text-5xl font-bold text-white mb-3 leading-tight"><%= anime.title %></h1>
                    <div class="flex flex-wrap gap-2 text-xs text-slate-300">
                        <% anime.genres.forEach(g => { %>
                            <span class="hover:text-purple-400 transition cursor-default">#<%= g.title %></span>
                        <% }) %>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <main class="container mx-auto px-5 md:px-10 -mt-2 relative z-10 space-y-8">
        <div class="animate-slide-up" style="animation-delay: 0.1s;">
            <div class="text-sm text-slate-300 leading-relaxed bg-slate-900/40 p-5 rounded-2xl border border-white/5 backdrop-blur-sm">
                <%- anime.desc %>
            </div>
        </div>

        <div class="animate-slide-up" style="animation-delay: 0.2s;">
            <div class="flex justify-between items-center mb-4">
                <h3 class="font-bold text-white text-lg">Episode List</h3>
                <span class="text-xs text-slate-500"><%= anime.episodes.length %> Episode</span>
            </div>
            
            <div class="bg-slate-900/20 border border-white/5 rounded-2xl p-4 max-h-[500px] overflow-y-auto custom-scroll">
                <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3">
                    <% if(anime.episodes.length > 0) { %>
                        <% anime.episodes.forEach(eps => { %>
                            <a href="/watch/<%= anime.id %>/<%= eps.id %>" class="bg-slate-800/60 hover:bg-purple-600 transition border border-white/5 hover:border-purple-500 rounded-xl p-3 text-center group relative overflow-hidden">
                                <span class="block text-[10px] text-slate-500 group-hover:text-purple-200 uppercase tracking-widest mb-1">Episode</span>
                                <span class="block text-xl font-bold text-white"><%= eps.title.replace(/\D/g, '') %></span>
                                <div class="absolute inset-0 bg-purple-500/10 opacity-0 group-hover:opacity-100 transition"></div>
                            </a>
                        <% }) %>
                    <% } else { %>
                        <p class="text-slate-500 col-span-full text-center py-10">Belum ada episode.</p>
                    <% } %>
                </div>
            </div>
        </div>
    </main>
</body>
</html>
